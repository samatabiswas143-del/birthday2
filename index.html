<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Cinematic Birthday Wish</title>

<!-- Preload key images for a flawless start -->
<link rel="preload" as="image" href="images/didi-1.jpg">
<link rel="preload" as="image" href="images/didi-2.jpg">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
:root{
  --ease:cubic-bezier(.22,1,.36,1);
  --glass:linear-gradient(135deg,
    rgba(255,255,255,.28),
    rgba(255,255,255,.05)
  );
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  background:#0a0a0a;
  font-family:'Poppins',sans-serif;
  color:#f5f5f5;
  overflow-x:hidden;
}

#stage{
  position:fixed;
  inset:0;
  perspective:1600px;
  overflow:hidden;
  background:
    radial-gradient(circle at top,rgba(255,140,200,.18),transparent 60%),
    linear-gradient(to bottom,#111,#000);
}

#stage::after{
  content:"";
  position:absolute;
  inset:0;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='1'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");
  pointer-events:none;
}

.scene{
  position:absolute;
  inset:0;
  transform-style:preserve-3d;
  transition: transform 0.3s ease-out; /* For gaze effect */
}

/* NEW: Background Image Planes */
.bg-plane {
    position: absolute;
    inset: -20%; /* Slightly larger to avoid edges showing */
    background-size: cover;
    background-position: center;
    transform-style: preserve-3d;
    opacity: 0;
}
.bg-plane::after { /* Gradient overlay */
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,0.8));
}

#bg0 { background-image: url('images/didi-1.jpg'); }
#bg1 { background-image: url('images/didi-2.jpg'); }
#bg2 { background-image: url('images/family.jpg'); }
#bg3 { background-image: url('images/selfie.jpg'); }
#bg4 { background-color: #0c0c0c; } /* Final card background */

.card{
  position:absolute;
  left:50%;
  top:50%;
  width:min(86vw,380px);
  padding:1.9rem;
  border-radius:26px;
  background:var(--glass);
  backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
  border:1px solid rgba(255,255,255,.35);
  box-shadow: 0 40px 80px rgba(0,0,0,.6), inset 0 0 0 1px rgba(255,255,255,.1);
  transform-style:preserve-3d;
  opacity:0;
  will-change: transform, opacity;
}

.card::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,transparent 20%,rgba(255,255,255,.35),transparent 70%);
  opacity:.15;
  pointer-events:none;
}

h1,h2{ font-family:'Playfair Display',serif; margin-bottom:.5rem; }
h1{font-size:2.2em}
h2{font-size:1.6em}
p{font-size:.95em;line-height:1.65}
.greeting{ font-family:'Dancing Script',cursive; font-size:2.4em; background:linear-gradient(90deg,#ffd700,#ffb347); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.name{ margin-top:1.5rem; font-family:'Playfair Display',serif; }

#scroll-space{ height:500vh; /* Increased for better pacing */ }

@media(max-width:768px){
  h1{font-size:2em}
  .greeting{font-size:2.1em}
  p{font-size:.92em}
}
</style>
</head>

<body>

<div id="stage">
  <div class="scene">
    <!-- Background Planes -->
    <div class="bg-plane" id="bg0" data-index="0"></div>
    <div class="bg-plane" id="bg1" data-index="1"></div>
    <div class="bg-plane" id="bg2" data-index="2"></div>
    <div class="bg-plane" id="bg3" data-index="3"></div>
    <div class="bg-plane" id="bg4" data-index="4"></div>
      
    <!-- Glass Cards -->
    <div class="card" data-index="0">
      <p class="greeting">Happy Birthday</p>
      <h1>My Dearest Didi</h1>
      <p>This year is not just another birthday… it’s the beginning of a beautiful new life chapter.</p>
    </div>
    <div class="card" data-index="1">
      <h2>To The Mother-To-Be</h2>
      <p>You are about to experience the purest form of love this world can offer.</p>
    </div>
    <div class="card" data-index="2">
      <h2>Our Family Is Growing</h2>
      <p>A tiny heartbeat is already filling our hearts with endless joy.</p>
    </div>
    <div class="card" data-index="3">
      <h2>A New Adventure Begins</h2>
      <p>I promise to stand by you for every smile, every tear, and every beautiful memory.</p>
    </div>
    <div class="card" data-index="4">
      <h2>This Year Is Extra Special</h2>
      <p>May your days be filled with peace, strength, and unconditional love.</p>
      <p class="name">With all my love,<br>Fultu</p>
    </div>
  </div>
</div>

<div id="scroll-space"></div>

<script>
(() => {
  const cards = document.querySelectorAll(".card");
  const backgrounds = document.querySelectorAll(".bg-plane");
  const stage = document.getElementById("stage");
  const scene = document.querySelector(".scene");
  const total = cards.length;

  function animate(){
    const maxScroll = document.body.scrollHeight - innerHeight;
    const progress = window.scrollY / maxScroll;

    // Dolly Zoom Effect
    const perspective = 1600 - Math.min(1, progress * 4) * 600;
    stage.style.perspective = `${perspective}px`;

    // Animate Cards and Backgrounds
    for(let i=0; i < total; i++){
        const card = cards[i];
        const bg = backgrounds[i];
        const phase = progress * total - i;
        const v = Math.max(-1,Math.min(1,phase));

        const cardZ = -1200 + v * 1200;
        const rotateY = v * 18;
        const rotateX = -v * 6;
        const scale = 1 - Math.abs(v) * .15;
        const opacity = 1 - Math.abs(v);
        
        card.style.transform = `translate(-50%,-50%) translateZ(${cardZ}px) rotateY(${rotateY}deg) rotateX(${rotateX}deg) scale(${scale})`;
        card.style.opacity = opacity;
        
        // Backgrounds are further back and move slower
        const bgZ = -4000 + v * 2000;
        const bgOpacity = 1 - Math.abs(v) * 0.8;
        bg.style.transform = `translateZ(${bgZ}px)`;
        bg.style.opacity = bgOpacity;
    }

    requestAnimationFrame(animate);
  }

  // Gaze Effect
  const handleGaze = (e) => {
      const { clientX, clientY } = e;
      const x = (clientX / innerWidth - 0.5) * 2;
      const y = (clientY / innerHeight - 0.5) * 2;
      scene.style.transform = `rotateY(${x * 3}deg) rotateX(${-y * 3}deg)`;
  };
  window.addEventListener('mousemove', handleGaze);
  
  animate();
})();
</script>

</body>
</html>
